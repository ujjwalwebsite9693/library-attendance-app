{% extends "layout.html" %}
{% block content %}
<h2 class="text-2xl font-bold mb-6">ğŸ’° Check & Update Payments</h2>
<div>
<form method="GET" action="/export_students_payment_pdf" class="mb-4">
  <button type="submit" class="bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700">
    ğŸ“¤ Export Paid Students PDF
  </button>
</form>
<form method="GET" action="/export_unpaid_students_pdf" class="mb-4">
  <button type="submit" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">
    ğŸ“¤ Export Unpaid Students PDF
  </button>
</form>
</div>

<table class="min-w-full bg-gray-800 text-white rounded shadow">
  <thead>
    <tr>
      <th class="py-2 px-4">Name</th>
      <th class="py-2 px-4">Seat No.</th>
      <th class="py-2 px-4">Mobile</th>
      <th class="py-2 px-4">Current Status</th>
      <th class="py-2 px-4">Action</th>
    </tr>
  </thead>
  <tbody>
    {% for s in students %}
    <tr class="border-b border-gray-700">
      <td class="py-2 px-4">{{ s.name }}</td>
      <td class="py-2 px-4">{{ s.seat_no }}</td>
      <td class="py-2 px-4">{{ s.mobile }}</td>
      <td class="py-2 px-4">
        {% if s.payment_status == "Paid" %}
          <span class="bg-green-600 px-2 py-1 rounded">Paid</span>
        {% else %}
          <span class="bg-red-600 px-2 py-1 rounded">Unpaid</span>
        {% endif %}
      </td>
      <td class="py-2 px-4">
        {% if s.payment_status == "Unpaid" %}
        <form method="POST" action="{{ url_for('update_payment', student_id=s.id) }}">
          <button class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">Mark as Paid</button>
        </form>
        {% else %}
        <span class="text-gray-400 text-sm italic">Already Paid</span>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
